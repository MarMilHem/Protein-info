<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Protein Info</title>
  <style>
    body {
      font-family: system-ui, sans-serif;
      background: #f7f9fc;
      color: #222;
      margin: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      text-align: center;
      padding: 2rem;
    }

    .title-box {
      background: #e6f3ff;
      border-radius: 20px;
      padding: 2rem 3rem;
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
      display: inline-block;
      margin-bottom: 1.5rem;
    }

    h1 {
      margin: 0;
      font-size: 2.5rem;
      color: #0059ff;
    }

    p {
      max-width: 600px;
      margin: 0.75rem auto;
      line-height: 1.6;
      color: #333;
    }

    footer {
      margin-top: 3rem;
      font-size: 0.9rem;
      color: #777;
    }.search-bar {
  margin-top: 2rem;
  display: flex;
  justify-content: center;
  gap: 0.5rem;
}

.search-bar input {
  padding: 0.75rem 1rem;
  font-size: 1rem;
  border: 1px solid #ccc;
  border-radius: 999px;
  width: 280px;
  outline: none;
  transition: border-color 0.2s, box-shadow 0.2s;
}

.search-bar input:focus {
  border-color: #0059ff;
  box-shadow: 0 0 6px rgba(0, 89, 255, 0.3);
}

.search-bar button {
  background-color: #0059ff;
  color: white;
  border: none;
  border-radius: 999px;
  padding: 0.75rem 1.5rem;
  font-size: 1rem;
  cursor: pointer;
  transition: background-color 0.2s;
}

.search-bar button:hover {
  background-color: #0040cc;
}

    
  </style>
  <link rel="stylesheet" href="assets/css/compare.css" />
</head>
<body>
  <div class="title-box">
    <h1>Welcome to Protein Info</h1>
  </div>

  <p>
    A place where you can explore and compare different protein brands ‚Äî 
    their prices, macros, and nutritional profiles ‚Äî all in one spot.
  </p>

  <p>üöß This site is under development ‚Äî more features coming soon!</p>

<!-- üîç Search Bar -->
<form id="brandSearchForm" class="search-bar" action="/search" method="get">
  <input type="text" name="q" placeholder="Search for a protein brand..." required />
  <button type="submit">Search</button>
</form>
<div id="brandResults" style="max-width:800px;margin:2rem auto;text-align:left;"></div>


<!-- FOOTER -->
  <footer>
    &copy; 2025 Protein Info. All rights reserved.
  </footer>
 
<!-- SEARCH ENGINE LOGIC -->
 <script>
const formEl = document.getElementById('brandSearchForm');
const resultsEl = document.getElementById('brandResults');

formEl.addEventListener('submit', async (e) => {
  e.preventDefault();
  const query = formEl.q.value.trim();
  if (!query) return;

  resultsEl.innerHTML = "üîç Searching...";

  try {
    // Call your backend route (we‚Äôll create this next)
    const res = await fetch(`/search?q=${encodeURIComponent(query)}`);
    const data = await res.json();

    if (!res.ok) throw new Error(data.error || "Search failed");

    if (!data.results?.length) {
      resultsEl.innerHTML = "No protein brands found.";
      return;
    }

    // Show results nicely
    resultsEl.innerHTML = data.results.map(r => `
      <article style="padding:1rem;border:1px solid #eee;border-radius:.8rem;margin:.75rem 0;">
        <a href="${r.url}" target="_blank" rel="noopener" style="font-weight:600;text-decoration:none;color:#0059ff;">
          ${r.name}
        </a>
        <div style="font-size:.9rem;color:#666;margin:.25rem 0;">${r.displayUrl || r.url}</div>
        <p style="margin:.5rem 0 0 0;line-height:1.5;">${r.snippet || ""}</p>
      </article>
    `).join('');
  } catch (err) {
    resultsEl.innerHTML = `<span style="color:red;">‚ùå ${err.message}</span>`;
  }
});
</script>
<!-- at end of <body> (recommended so DOM exists before JS runs) -->
<script src="assets/js/compare.js" defer></script>
<section id="compare-section" style="margin:24px 0;">
  <div id="compare-wrap">
    <div id="compare-head">
      <h2>Compare products <span class="chip" id="compare-count">0</span></h2>
      <div class="toolbar">
        <label class="toggle"><input type="checkbox" id="veganOnly"><span>Vegan only</span></label>
        <label class="toggle">
          <span class="hide-sm">Type</span>
          <select id="typeFilter">
            <option value="">All types</option>
            <option>Whey</option><option>Isolate</option><option>Casein</option><option>Vegan</option><option>Egg</option>
          </select>
        </label>
        <label class="toggle"><input type="checkbox" id="toggleExtended"><span>Show extended columns</span></label>
        <button class="btn" id="clearBtn">Clear</button>
        <button class="btn" id="shareBtn">Share link</button>
        <button class="btn btn-primary" id="loadExamplesBtn">Load demo</button>
      </div>
    </div>

    <div class="table-wrap">
      <table class="compare" id="compareTable" aria-label="Protein comparison table">
        <thead>
          <tr>
            <th data-key="brand">Brand</th>
            <th data-key="product">Product</th>
            <th class="hide-md" data-key="type">Type</th>
            <th class="num" data-key="pricePerKg">Price / kg</th>
            <th class="num hide-md" data-key="servingSizeG">Serving (g)</th>
            <th class="num" data-key="pricePerServing">Price / serving</th>
            <th class="num" data-key="proteinPer100g">Protein / 100g</th>
            <th class="num" data-key="proteinPerServing">Protein / serving</th>
            <th class="num hide-md ext" data-key="caloriesPerServing">Calories / serving</th>
            <th class="num hide-md ext" data-key="carbsPerServing">Carbs / serving</th>
            <th class="num hide-md ext" data-key="fatPerServing">Fat / serving</th>
            <th class="hide-md ext" data-key="sweeteners">Sweeteners</th>
            <th class="hide-md ext" data-key="allergens">Allergens</th>
            <th class="hide-md ext" data-key="origin">Origin</th>
            <th class="num hide-md ext" data-key="rating">Rating</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody id="compareBody"></tbody>
      </table>
    </div>

    <div id="compare-empty">No items yet. Use your search results‚Äô ‚ÄúAdd to compare‚Äù to begin.</div>
  </div>
</section>

</body>
</html>
