<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Protein Info</title>
  <style>
    :root{
      --bg:#f7f9fc; --text:#1f2937; --muted:#6b7280; --ring:#e5e7eb;
      --brand:#0059ff; --brand-600:#0045d0;
      --card:#ffffff; --shadow:0 6px 24px rgba(0,0,0,.07);
      --best:#10b98120; --best-ring:#10b98155;
    }

    body {
      font-family: system-ui, sans-serif;
      background: var(--bg);
      color: var(--text);
      margin: 0;
      padding: 2rem;
      text-align: center;
      line-height: 1.55;
    }
    h1 { color: var(--brand); margin-bottom: .5rem; }
    h2 { margin: 1.5rem 0 .75rem; }

    /* ====== GEOMETRIC GRID BACKGROUND ====== */
    body::before{
      content:""; position:fixed; inset:0; z-index:-1; pointer-events:none;
      background:
        linear-gradient(to right, rgba(0,0,0,.04) 1px, transparent 1px) 0 0 / 28px 28px,
        linear-gradient(to bottom, rgba(0,0,0,.04) 1px, transparent 1px) 0 0 / 28px 28px;
      mask: radial-gradient(1200px 800px at 50% 10%, #000 55%, transparent 100%);
      animation: gridDrift 60s linear infinite;
    }
    @keyframes gridDrift {
      from { background-position: 0 0, 0 0; }
      to   { background-position: 200px 200px, 200px 200px; }
    }

    /* === icons / badges === */
    .badges{display:flex;gap:.5rem;justify-content:center;flex-wrap:wrap;margin:.25rem 0 1rem}
    .badge{display:inline-flex;align-items:center;gap:.5rem;background:var(--card);border:1px solid var(--ring);
      padding:.4rem .6rem;border-radius:999px;box-shadow:var(--shadow);font-weight:600}
    .badge svg{width:18px;height:18px;fill:currentColor;color:var(--brand)}

    .btn {
      background: #eee;
      border: 1px solid #ccc;
      border-radius: 6px;
      padding: 6px 12px;
      cursor: pointer;
      transition: background .2s;
    }
    .btn:hover { background: #ddd; }
    .btn-primary {
      background: var(--brand);
      color: white;
      border-color: var(--brand);
    }
    .btn-primary:hover { background: var(--brand-600); }

    /* search bar + filters */
    .search-bar {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      align-items: center;
      justify-content: center;
      margin-bottom: 24px;
    }
    .search-bar input,
    .search-bar select {
      padding: 8px;
      border: 1px solid #ccc;
      border-radius: 10px;
      background: #fff;
      box-shadow: var(--shadow);
    }
    .search-bar input { flex: 0 1 480px; min-width: 220px; max-width: 520px; }

    .result {
      background:white;
      padding:12px;
      border-radius:12px;
      margin-bottom:10px;
      text-align:left;
      box-shadow:0 6px 18px rgba(0,0,0,0.06);
    }
    #brandResults {
      max-height: 480px;
      overflow-y: auto;
      margin-bottom: 1rem;
      padding-right: 6px;
      scrollbar-gutter: stable;
    }
    #brandResults::-webkit-scrollbar { width: 8px; }
    #brandResults::-webkit-scrollbar-thumb { background: #c3c8d4; border-radius: 4px; }
    #brandResults::-webkit-scrollbar-thumb:hover { background: #9ea4b3; }

    /* Compare table styling */
    .table-wrap{
      overflow:auto;
      background:linear-gradient(#fff,#fff) padding-box, linear-gradient(to right, transparent, transparent) border-box;
      border:1px solid var(--ring);
      border-radius:14px;
      box-shadow:var(--shadow);
    }
    table.compare {
      width: 100%;
      border-collapse: separate;
      border-spacing: 0;
      font-size: .95rem;
      min-width: 760px;
      text-align:left;
    }
    table.compare th,
    table.compare td {
      padding: .7rem .9rem;
      border-bottom: 1px solid var(--ring);
    }
    table.compare th.num,
    table.compare td.num { text-align: right; }
    .compare thead th{
      position:sticky; top:0; background:#fff; z-index:1;
      font-size:.9rem; color:#111;
    }
    .compare tbody tr:nth-child(odd){background:#fafafa}
    .compare tbody tr:hover{background:#f3f7ff}

    .metric .bar{height:8px;border-radius:6px;background:#e5e7eb;position:relative;overflow:hidden;margin-top:4px}
    .metric .bar > i{position:absolute;inset:0;width:0%;display:block;background:linear-gradient(90deg,#93c5fd,#60a5fa)}
    td.protein.is-best{background:var(--best)!important;box-shadow:inset 0 0 0 2px var(--best-ring)}
    .best-tag{display:inline-flex;align-items:center;gap:.35rem;background:#10b981;color:#053c2a;border-radius:999px;padding:.15rem .45rem;font-size:.75rem;font-weight:700;margin-left:.5rem}

    .chip {
      display:inline-block;
      background:#e5eaff;
      color:var(--brand);
      border-radius:999px;
      padding:0 8px;
      font-size:.8rem;
      margin-left:4px;
    }

    footer {
      margin-top: 3rem;
      font-size: 0.9rem;
      color: #777;
    }

    .compare thead th:first-child{border-top-left-radius:14px}
    .compare thead th:last-child{border-top-right-radius:14px}
    .compare tbody tr:last-child td:first-child{border-bottom-left-radius:14px}
    .compare tbody tr:last-child td:last-child{border-bottom-right-radius:14px}

    #compare-head{display:flex;align-items:center;justify-content:space-between;gap:.75rem;flex-wrap:wrap}
    #compare-empty{color:var(--muted);margin:.75rem 0}
  </style>
</head>
<body>
  <main>
    <h1>Protein Info</h1>

    <div class="badges">
      <span class="badge" title="Protein">
        <svg viewBox="0 0 24 24" aria-hidden="true">
          <path d="M4 12a6 6 0 1 1 12 0v2.2l3.6 1.2a2 2 0 1 1-.64 3.9L16 18.5V12A8 8 0 1 0 0 12a1 1 0 0 0 2 0 6 6 0 0 1 2-4z"/>
        </svg>
        Protein
      </span>
      <span class="badge" title="Dietary">
        <svg viewBox="0 0 24 24" aria-hidden="true">
          <path d="M20.5 3.5c-6.4-.7-10.9 1.6-13.8 4.5C3.2 11.5 2 15.1 2 18.3c0 .9.8 1.7 1.7 1.7 3.2 0 6.8-1.2 10.3-4.7 2.9-2.9 5.2-7.4 4.5-13.8zM9.5 14l-2-2 1.4-1.4 1 1 4-4L15.3 9l-4.9 5z"/>
        </svg>
        Dietary
      </span>
    </div>

    <p>Explore and compare different protein brands ‚Äî their macros, price, and quality.</p>

    <!-- üîç Unified Search + Filters -->
    <form id="brandSearchForm" class="search-bar">
      <input type="text" name="q" placeholder="Search for a protein brand..." required />
      <select name="type" id="filterType">
        <option value="">All types</option>
        <option value="whey">Whey</option>
        <option value="isolate">Isolate</option>
        <option value="vegan">Vegan</option>
      </select>
      <select name="sort" id="sortOrder">
        <option value="">Sort by</option>
        <option value="price">Lowest price</option>
        <option value="protein">Highest protein</option>
        <option value="calories">Lowest calories</option>
      </select>
      <button type="submit" class="btn btn-primary">üîç Search</button>
    </form>

    <div id="brandResults"></div>

    <!-- üî¢ Comparison Table -->
    <section id="compare-section" style="margin:24px 0;">
      <div id="compare-wrap">
        <div id="compare-head">
          <h2>Compare products <span class="chip" id="compare-count">0</span></h2>
          <div class="toolbar">
            <button class="btn" id="clearBtn" type="button">Clear</button>
            <button class="btn" id="shareBtn" type="button">Share link</button>
            <button class="btn btn-primary" id="loadExamplesBtn" type="button">Load demo</button>
          </div>
        </div>

        <div class="table-wrap">
          <table class="compare" id="compareTable">
            <thead>
              <tr>
                <th>Brand</th><th>Product</th>
                <th class="num">Serving (g)</th><th class="num">Price / serving</th>
                <th class="num">Protein / serving</th><th class="num">Calories / serving</th>
                <th class="num">Carbs / serving</th><th class="num">Fat / serving</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody id="compareBody"></tbody>
          </table>
        </div>

        <p class="legend" style="color:var(--muted);margin:.6rem .2rem;text-align:left">
          <span style="display:inline-block;width:12px;height:12px;border-radius:3px;background:var(--best);box-shadow:inset 0 0 0 2px var(--best-ring);vertical-align:middle;margin-right:.35rem"></span>
          Highest protein per serving
        </p>

        <div id="compare-empty">No items yet. Use your search results or the list above to ‚ÄúAdd to compare‚Äù.</div>
      </div>
    </section>

    <footer>&copy; 2025 Protein Info. All rights reserved.</footer>
  </main>

  <!-- ‚úÖ Keep your JS scripts (search + compare) below this as you had before -->
</body>
</html>
